p (ss = (lines = File.read("2022/day7/input.txt")[2..].split("\n$ ")).each_with_object([Hash.new(0), ["/"]]) { |l, (dirs, fp)| l.start_with?("cd") ? (l =~ /\.\./ ? fp.pop : (l =~ /\// ? fp = ["/"] : fp << l.split[1])) : (fp.each_with_object([]) { |dir, path| dirs["/" + (path << dir)[1..].join("/")] += (items = l[3..].split("\n").reject { |x| x =~ /dir/ }).map { |item| item.split.first.to_i }.sum })}.first.values.sort).find {|s| s > ss.last - 4*10**7 } #filter { |x| x <= 100_000 }.sum
